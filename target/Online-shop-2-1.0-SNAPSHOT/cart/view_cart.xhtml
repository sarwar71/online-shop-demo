<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>View Cart</title>
</h:head>

<h:body>
    <h:form id="form">
        <h:dataTable var="cart" value="#{shoppingCartBean.cart}" rows="10">

            <f:facet name="header">
                <h2>Your Cart</h2>
            </f:facet>

            <h:column>
                <f:facet name="header">Product Name</f:facet>
                <h:outputText value="#{cart.product.productName}"/>
            </h:column>

            <h:column>
                <f:facet name="header">Image</f:facet>
                <h:graphicImage name="#{cart.product.productUrl}" library="images" width="50" height="50"/>
            </h:column>

            <h:column>
                <f:facet name="header">Product Quantity</f:facet>
                <h:inputText style="width: 3em" value="#{cart.quantity}"/>
            </h:column>

            <h:column>
                <f:facet name="header">Unit Price</f:facet>
                <h:outputText value="#{cart.product.productPrice}"/>
            </h:column>

            <h:column>
                <f:facet name="header">Total</f:facet>
                <h:outputText value="#{cart.totalPrice}"/>
            </h:column>

            <h:column>
                <f:facet name="header">Delete From Cart</f:facet>
                <h:commandButton value="Delete" action="#{shoppingCartBean.removeCart(cart)}"/>
            </h:column>

        </h:dataTable>

        <br/>
        <h2>Total Price: <h:outputText value="#{shoppingCartBean.finalTotalPrice}"/></h2>
        <br/>

        <h:commandButton style="margin-right: 1em" value="Update" action="#{shoppingCartBean.updateCart()}"/>
        <h:outputLink value="#{request.contextPath}/product/view_product.xhtml">Continue Shopping</h:outputLink>

    </h:form>
</h:body>

</html>